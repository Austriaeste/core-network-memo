# コアネットワーク学習メモ

## コアネットワークの概要
コアネットワーク（CN）は、通信ネットワークの中核部分であり、音声通話、データ通信、メッセージングなど、さまざまな通信サービスを提供するための重要なインフラです。
コアネットワークは、エンドユーザーのデータの転送、セッションの管理、サービスの品質確保など、多くの役割を果たしています。

### コアネットワークの主要機能
- **データ転送**: ユーザーが実際に利用する音声やデータトラフィックを迅速かつ効率的に転送します。
  - *例*: スマートフォンで動画をストリーミングする際、コアネットワークは動画データをユーザーのデバイスに最適な経路で送信します。
- **セッション管理**: ユーザーのセッションを確立、維持、終了するための管理を行います。
  - *例*: VoIP通話中にユーザーが通話を開始したとき、コアネットワークは通話セッションを確立し、通話が終了するまで管理します。
- **トラフィック管理**: QoS（Quality of Service）を確保し、混雑時のトラフィックを最適に処理します。
  - *例*: ピーク時に多くのユーザーが同時にデータをダウンロードする場合、コアネットワークはトラフィックを調整し、各ユーザーに均等に帯域幅を提供します。

### IMS基盤
- IMS（IP Multimedia Subsystem）は、コアネットワーク内でマルチメディアサービスを提供するためのアーキテクチャです。これにより、音声通話や動画通話、メッセージングなどのサービスをIPベースで統合的に管理します。
  - *例*: スマートフォンのアプリを使ってビデオ通話を行う場合、IMSが通話の確立とメディアの転送を管理します。

### IMSの構成要素
#### CSCF（Call Session Control Function）
CSCFはセッションの管理を行う重要なコンポーネントで、通常、以下の3種類に分かれます。

1. **P-CSCF（Proxy-CSCF）**
   - **役割**: ユーザー端末とIMSネットワークの間でリクエストを中継し、セキュリティ機能を提供します。ユーザーの認証情報を確認し、セッションの初期設定を行います。
   - *例*: VoLTEの通話要求を処理し、適切なルーティングを行う際に利用されます。

2. **I-CSCF（Interrogating-CSCF）**
   - **役割**: 他のネットワークとの接続や、ユーザー情報を取得する役割を持ちます。特に、他のキャリアやネットワークからのリクエストを処理します。
   - *例*: 異なる通信事業者間での通話が発生した場合、I-CSCFがリクエストを適切に転送します。

3. **S-CSCF（Serving-CSCF）**
   - **役割**: ユーザーセッションの管理を行い、サービスのロジックを適用します。セッションの確立や終了の処理を担当し、サービスプロファイルに基づいてユーザーにサービスを提供します。
   - *例*: ユーザーがビデオ通話を開始した場合、S-CSCFが通話セッションを管理し、必要なリソースを確保します。

4. **HSS（Home Subscriber Server）**
- **役割**: ユーザーの情報やサービスプロファイルを管理するデータベースで、ユーザー認証、課金情報、サービス設定などが保存されています。
  - *例*: ユーザーがネットワークに接続する際、HSSがそのユーザーのサービスレベルを確認し、アクセスを許可します。
- **機能**: HSSは、セッションの確立や維持に必要な情報を提供し、CSCFと連携してユーザーのサービスを管理します。

### コアネットワークの区分
コアネットワークは、通常、以下の三つの主要なコンポーネントに分かれます。
- **CS（Circuit-Switched）**: 従来の回線交換方式を用いた音声通話に使用されます。
  - *例*: 昔の固定電話による通話が該当します。通話が確立すると、専用の回線が確保され、通話が終了するまでその回線が保持されます。
- **SV（Signaling Virtualization）**: 信号処理の仮想化を行い、効率的な信号管理を実現します。
  - *例*: VoLTE（Voice over LTE）など、信号処理を仮想化することで、複数のサービスを同時に効率的に管理できます。
- **PS（Packet-Switched）**: パケット交換方式を利用したデータ通信に関与します。インターネットベースのトラフィックがこれに該当します。
  - *例*: ウェブサイトの閲覧やデータのダウンロードなど、データをパケットとして送信します。

## U-PlaneとC-Planeの関係
コアネットワークにおける**U-Plane（User Plane）**と**C-Plane（Control Plane）**は、データの流れを異なる役割で区別するための重要な概念です。

### U-Plane（User Plane）
- **役割**: ユーザーデータの送受信を担当します。エンドユーザーが利用する音声、ビデオ、データなどのトラフィックが含まれます。
  - *例*: ユーザーがオンラインゲームをプレイする際、ゲームデータがU-Planeを通じて送信されます。
- **機能**:
  - ユーザーが利用するサービスのデータを処理し、効率的に転送します。
  - 高速なデータ転送を実現するために、最適化された経路を使用します。

### C-Plane（Control Plane）
- **役割**: ネットワークの制御、管理、設定を担当します。ユーザーセッションの確立、維持、終了に関する情報を処理します。
  - *例*: ユーザーがモバイルデータを有効にする際、C-Planeがその設定を管理し、必要な情報をU-Planeに伝えます。
- **機能**:
  - ユーザーの認証、課金、セッション管理を行います。
  - U-Planeでのデータ転送をサポートするために必要なパラメータや設定を通信します。

### 相互依存性
U-PlaneとC-Planeは相互に依存しており、C-Planeがユーザーセッションを管理することで、U-Planeでのデータ転送が円滑に行われます。
たとえば、音声通話を行う際、C-Planeが通話の開始や終了を管理し、U-Planeが実際の音声データを転送します。

>MME、SGW、PCRF（これはCNではないけど場合によっては含む）をIMSの構成要素のところに加筆する必要あるので、それが残タ。
